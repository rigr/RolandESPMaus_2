/*  main.c  -- RolandESPMaus (ESP32, ESP-IDF v5.x compatible)  - Bluetooth HID Host (Bluedroid) which selects the strongest HID mouse by RSSI and connects  - Provides WiFi AP "RolandMouse"/"MausMaus" and a tiny HTTP UI  - Emulates Roland/MSX-style nibble-based mouse protocol on DB9 pins (via level shifter)  - Serial console commands (help, scan, scan WiFi)  - Periodic status every 5s, LED blink vs steady  NOTES:   - This file is written to compile against ESP-IDF v5.x (release-v5.1 or compatible).   - Uses the Bluedroid HID Host API: esp_bt_hid_host_register_callback, esp_bt_hid_host_init, esp_bt_hid_host_connect.   - Keep wiring / level-shifter precautions from docs.*//* main.c  - RolandESPMaus * * Minimaler, aber vollständiger ESP-IDF (v5.x) Sketch, der: *  - Bluetooth HID Host nutzt (esp_hid_host APIs) *  - automatisch die Maus mit dem stärksten RSSI auswählt und verbindet *  - einfache Web-UI per AccessPoint "RolandMouse" (PSK "MausMaus") *  - 5s Statusmeldungen über UART *  - Serieller Konsolenparser: "scan", "scan WiFi", "help", "scan bt", "scanwifi" *  - LED blinkt, wenn NO MOUSE, solid wenn MOUSE connected * * Wichtig: keine persistente Speicherung ins Flash (nur RAM). Verbindung bleibt * bis zum Power-Off aktiv. * * Build: Projekt setzt REQUIRES bt, esp_netif, esp_wifi, esp_http_server, nvs_flash. */#include <stdio.h>#include <string.h>#include "esp_log.h"#include "esp_err.h"#include "nvs_flash.h"#include "esp_bt.h"#include "esp_hidh.h"#include "esp_bt_main.h"#include "esp_bt_device.h"#include "esp_gap_bt_api.h"static const char *TAG = "RolandESPMaus";static char mouse_name[64] = "Keine Maus";static bool scanning = false;static void hidh_cb(esp_hidh_cb_event_t event, esp_hidh_cb_param_t *param){    switch (event)    {    case ESP_HIDH_OPEN_EVENT:        ESP_LOGI(TAG, "HID-Gerät verbunden: %s", (param->open.name && param->open.name[0]) ? param->open.name : "Unbekannt");        strncpy(mouse_name, (param->open.name && param->open.name[0]) ? param->open.name : "Unbekannt", sizeof(mouse_name));        break;    case ESP_HIDH_INPUT_EVENT:        ESP_LOGI(TAG, "Eingangsdaten von %s: %d Bytes", mouse_name, param->input.length);        break;    case ESP_HIDH_CLOSE_EVENT:        ESP_LOGI(TAG, "HID-Gerät getrennt: %s", mouse_name);        strncpy(mouse_name, "Keine Maus", sizeof(mouse_name));        break;    default:        ESP_LOGW(TAG, "Unbehandeltes HID-Ereignis: %d", event);
